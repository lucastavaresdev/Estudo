<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Async/Await Intro</title>
</head>

<body>
    <!--
        Básico
        - async/await funciona obrigatoriamente no protocolo de Promises
        - async é uma palavra chave usada no início de uma função
        - await é usado para avisar a função para esperar o resultado da Promise
        - await só pode ser usado para uma função com async
        - async/await já está funcionando em quase todos os Browsers e NodeJS

        Vantagens de usar async/await
        - O código fica mais simplificado
        - Mais fácil de debugar por ter menos callbacks
        - A conversão de uma promise para async/await é bem simples
        - O código fica com menos encadeamentos
         -->



    <script>
        //await espera ate o json ser resolvido e retorna
        async function getPosts() {
            try {
                const response = await fetch('https://willianjusten.com.br/search.json');
                const data = await response.json();

                return data.map(post => {
                    console.log(post.title);
                });
            } catch (error) {
                console.error('error')
            }
        }

        getPosts();
    </script>
</body>

</html>